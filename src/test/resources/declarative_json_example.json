{
  "formId": "FORM_ID_IDENTYFIKACJA",
  "version": "1.0.0",
  "formName": "formularzIdentyfikacyjny",
  "groups": {
    "userIdentification": {
      "label": "Identyfikacja użytkownika",
      "fields": ["identityMethod", "birthDate", "nationalId", "vinNumber", "registrationNumber"]
    }
  },
  "schema": {
    "identityMethod": {
      "label": "Wybierz metodę identyfikacji",
      "type": "string",
      "possibleOptions": ["PESEL/NIP/REGON", "Data urodzenia"],
      "defaultValue": "PESEL/NIP/REGON"
    },
    "birthDate": {
      "label": "Data urodzenia",
      "type": "string",
      "props": {
        "visible": {
          "when": {
            "field": "identityMethod",
            "operator": "EQUAL",
            "value": "Data urodzenia"
          },
          "then": true,
          "otherwise": false
        },
        "required": {
          "when": {
            "field": "identityMethod",
            "operator": "EQUAL",
            "value": "Data urodzenia"
          },
          "then": true,
          "otherwise": false
        }
      },
      "validators": [
        {
          "name": "regex",
          "expression": "^\\d{4}-\\d{2}-\\d{2}$"
        }
      ]
    },
    "nationalId": {
      "label": "PESEL / NIP / REGON",
      "type": "string",
      "props": {
        "visible": {
          "when": {
            "field": "identityMethod",
            "operator": "EQUAL",
            "value": "PESEL/NIP/REGON"
          },
          "then": true,
          "otherwise": false
        },
        "required": {
          "when": {
            "field": "identityMethod",
            "operator": "EQUAL",
            "value": "PESEL/NIP/REGON"
          },
          "then": true,
          "otherwise": false
        }
      },
      "validators": [
        {
          "name": "regex",
          "expression": "^(\\d{11}|\\d{10}|\\d{9})$"
        }
      ]
    },
    "vinNumber": {
      "label": "Numer VIN",
      "type": "string",
      "props": {
        "required": {
          "when": {
            "operator": "AND",
            "conditions": [
              { "field": "registrationNumber", "operator": "EQUAL", "value": "" },
              { "field": "noVehicle", "operator": "EQUAL", "value": false }
            ]
          },
          "then": true,
          "otherwise": false
        }
      },
      "validators": [
        {
          "name": "regex",
          "expression": "^[A-HJ-NPR-Z0-9]{17}$"
        }
      ]
    },
    "registrationNumber": {
      "label": "Numer rejestracyjny",
      "type": "string",
      "props": {
        "required": {
          "when": {
            "operator": "AND",
            "conditions": [
              { "field": "vinNumber", "operator": "EQUAL", "value": "" },
              { "field": "noVehicle", "operator": "EQUAL", "value": false }
            ]
          },
          "then": true,
          "otherwise": false
        }
      },
      "validators": [
        {
          "name": "regex",
          "expression": "^[A-Z0-9]{5,10}$"
        }
      ]
    }
  }
}
